esphome:
  name: seeed-sensecap
  friendly_name: Seeed SenseCAP

substitutions:
  # 1. Load theme defaults
  <<: !include theme/defaults.yaml
  
  # 2. Load hardware-specific substitutions
  <<: !include hardware/sensecap-indicator-substitutions.yaml

  # 3. Override any defaults if needed
  font_id: "libreFranklin25Light"
  font_id_small: "libreFranklin16"
  font_id_large: "libreFranklin32"
  
  # Grid overrides for this specific device
  grid_columns_main: ["48%", "48%"]
  grid_rows_main: ["48%", "48%"]

# 3. Load Hardware Template
<<: !include hardware/sensecap-indicator.yaml

# 4. Load Fonts
font: !include theme/fonts.yaml

logger:
  hardware_uart: UART0
  level: DEBUG

# 5. UI Implementation
lvgl:
  log_level: DEBUG
  style_definitions: !include theme/style.yaml

  pages:
    - id: main_page
      bg_color: ${color_bg}
      widgets:
        - tabview:
            # Use the tabview abstraction
            <<: !include layout/tabview_config.yaml
            
            tabs:
              - name: Home
                widgets:
                  - obj:
                      # Use the grid container abstraction
                      <<: !include 
                        file: layout/grid_container.yaml
                        vars:
                          grid_columns_spec: ${grid_columns_main}
                          grid_rows_spec: ${grid_rows_main}
                      
                      widgets:
                        # Widget 1: Clock
                        - <<: !include 
                            file: widgets/clock.yaml
                            vars:
                              widget_id: main_clock
                              font_id: ${font_id_large}
                              grid_col_pos: 0
                              grid_row_pos: 0
                        
                        # Widget 2: Weather
                        - <<: !include 
                            file: widgets/weather.yaml
                            vars:
                              widget_id: main_weather
                              font_id: ${font_id}
                              font_id_small: ${font_id_small}
                              grid_col_pos: 1
                              grid_row_pos: 0
              
              - name: Controls
                widgets:
                  - obj:
                      <<: !include layout/grid_container.yaml
                      widgets:
                        - <<: !include 
                            file: widgets/button.yaml
                            vars:
                              widget_id: btn_light
                              button_text: "Toggle Light"
                              grid_col_pos: 0
                              grid_row_pos: 0
